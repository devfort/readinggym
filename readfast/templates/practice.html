{% extends "base.html" %}
{% load asset_tags %}

{% block extra_head %}
{% include_js 'app.js' %}
<script>
{% block wpm_script %}
var wpm = Cookies.get("wpm") || 300;
{% endblock %}

$(function() {
  var pager = new Pager($("article"));
  var regulator = new Regulator($("article"), pager, wpm);

  $('#practice').click(function() {
    if(regulator.running) {
      regulator.stop();
      $(this).text('Start');
    } else {
      regulator.start();
      $(this).text('Stop');
    }
  });

  $("#practice").focus();
});
</script>
{% endblock %}

{% block content %}
<section class="ui">
    <button id="practice" type="button">Start</button>
</section>

<article>
    <header>
        <h1>{{ object.name }}</h1>
    
    {% if object.author %}
        <h2>by <em>{{ object.author }}</em></h2>
    {% endif %}

    {% if object.source_title %}
        <h3>Source: <a href="{{ object.source_url }}">{{ object.source_title }}</a></h3>
    {% endif %}
    </header>

    {{ words_to_read|safe|linebreaks }}
</article>

<span id="current-page"></span>/<span id="page-count"></span>

<section id="proceed">
    <a href="{% url "comprehension" object.pk %}">Test my understanding.</a>
</section>
{% endblock %}
