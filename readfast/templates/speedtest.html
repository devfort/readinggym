{% load staticfiles %}
<html>
<head>
    <script src="{% static "jquery-1.10.2.min.js" %}"></script>
        <style>
            article {
                width: 30em;
                margin: 0 auto 0 auto;
                line-height: 2em;
                position: relative;
                text-align: justify;
            }

            span {
                display: inline-block;
                white-space: pre;
            }

            .regulator {
                position: absolute;
                height: 3px;
                background-color: red;
            }
            #timer-module.enhanced form { display: none }
            #timer-control {
                position: fixed;
                background: white;
                right: 5px;
                top: 5px;
            }
        </style>
</head>
<body>

    <h1>Time this!</h1>

<div id='timer-module'>
  <p class='explanation'>
    You will need something (such as a stop watch) to time how long it takes you to read the following.
    Read as fast as you can while still understanding each line.
  </p>
  <div id='timer-control'></div>

<article>
{{ words_to_read|safe }}
</article>

<form method="post">
  {% csrf_token %}
  {{ form.as_p }}
  <button type="submit">Record time</button>
</form>

</div>
<script>

$( document ).ready(function() {
  $('#timer-module .explanation').html('How the clever buttons work yo');
  var $timing = $('<button type="button">Start</button>');
  $('#timer-module #timer-control').html($timing);
  $timing.click(function() {
    var t = Date.now();
    $timing
      .off()
      .text('Stop');
    $timing.click(function() {
      $timing.remove();
      t = Date.now() - t;
      $('#timer-module input[name="seconds"]').val(t / 1000);
      $('#timer-module form').submit();
    });
  });
  $('#timer-module').addClass('enhanced');
});
</script>

</body>
</html>
