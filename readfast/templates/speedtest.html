{% extends "base.html" %}
{% block extra_head %}
<style>
  #timer-module.enhanced form { display: none }
  #timer-control {
    position: fixed;
    background: white;
    right: 5px;
    top: 5px;
  }
</style>
{% endblock %}

{% block content %}
<div id='timer-module'>
  <p class='explanation'>
    You will need something (such as a stop watch) to time how long it takes you to read the following.
    Read as fast as you can while still understanding each line.
  </p>
  <div id='timer-control'></div>

  <article>
  {{ words_to_read|safe }}
  </article>

  <form method='post'>
    {% csrf_token %}
    {{ form.as_p }}
    <button type='submit'>Record time</button>
  </form>
</div>

<script>
var $timing = $('<button type="button">Start</button>');
$timing.click(function() {
  var t = Date.now();
  $timing
    .off()
    .text('Finish');
  $timing.click(function() {
    $timing.remove();
    t = Date.now() - t;
    $('#timer-module input[name="seconds"]').val(t / 1000);
    $('#timer-module form').submit();
  });
});
$('#timer-module #timer-control').html($timing);
$('#timer-module .explanation').html('How the clever buttons work yo');
$('#timer-module').addClass('enhanced');
</script>
{% endblock %}

